{% extends 'base.html.twig' %}

{% block title %}Dinder - {{ 'item.index.title'|trans }}{% endblock %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation"{% if traded_items %} class="active"{% endif %}>
                        <a href="#items-traded" aria-controls="items-traded" role="tab" data-toggle="tab">
                            {{ 'item.index.traded'|trans }}
                            <span class="badge {% if app.user and unseen_count.countUnseenItems(app.user) > 0 %} badge-highlight{% endif %}">{{ traded_items|length }}</span>
                        </a>
                    </li>
                    <li role="presentation"{% if not traded_items %} class="active"{% endif %}>
                        <a href="#items-active" aria-controls="items-active" role="tab" data-toggle="tab">
                            {{ 'item.index.active'|trans }}
                            <span class="badge">{{ items|length }}</span>
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane fade{% if traded_items %} in active{% endif %}" id="items-traded">
                        {% if traded_items %}
                            <div class="items-slider">
                                {% for item in traded_items  %}
                                    {% include 'item/card.html.twig' with {'item': item, 'activate': true} %}
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="alert alert-warning">
                                {{ 'item.index.no-items'|trans }}
                            </div>
                        {% endif %}
                    </div>
                    <div role="tabpanel" class="tab-pane fade{% if not traded_items %} in active{% endif %}" id="items-active">
                        {% if items %}
                            <div class="items-slider">
                                {% for item in items %}
                                    {% include 'item/card.html.twig' with {'item': item, 'exchange': true, 'edit': true} %}
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="alert alert-warning">
                                {{ 'item.index.no-items'|trans }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exchangeModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div id="swing"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script>
        var matchUrl = '{{ path('item_match') }}';
        var fetchUrl = null;
        var itemId = null;
    </script>
    {{ parent() }}
{% endblock %}
